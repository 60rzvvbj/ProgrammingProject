webpackJsonp([4],{"0RrJ":function(t,e,s){"use strict";e.a=function(t){return i.a.create({timeout:5e3})(t)};var n=s("mtWM"),i=s.n(n)},"1Odv":function(t,e){},"5g6/":function(t,e){},B5qy:function(t,e){},F8MX:function(t,e){},GgDs:function(t,e,s){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"logo",on:{click:this.logoClick}})])},staticRenderFns:[]};var i=s("VU/8")({name:"Header",methods:{logoClick:function(){this.$router.push("/home")}}},n,!1,function(t){s("UvZu")},null,null);e.a=i.exports},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("/5sW");function i(t,e){var s=new Date(Date.now()+864e5*e).toUTCString();for(var n in t)document.cookie=n+"="+t[n]+"; expires="+s}function o(t,e){return t+Math.random()*(e-t+1)}function a(t,e){return parseInt(o(t,e))}Node.prototype.getCSS=function(t){return function(t,e){var s=t.style.cssText.match(new RegExp("(^|\\s)"+e+": ([^;]+)(;|$)"));return null!=s?s[2]:null}(this,t)},Node.prototype.show=function(){this.style.display="block"},Node.prototype.hide=function(){this.style.display="none"};var r={getCookie:function(t){var e=document.cookie.match(new RegExp("(^|\\s)"+t+"=([^;]+)(;|$)"));return null!=e?e[2]:null},setCookie:i,removeCookie:function(t){var e={};e[t]="",i(e,-1)},getDoubleRandom:o,getIntRandom:a,randomColor:function(t,e){return"rgb("+a(t,e)+","+a(t,e)+","+a(t,e)+")"}},c=s("NYxO");n.a.use(c.a);var u=new c.a.Store({state:{user:{sno:null}},mutations:{setSno:function(t,e){t.user.sno=e},removeSno:function(t){t.user.sno=null}},modules:{}});window.tool=r;var l=r.getCookie("sno");l&&u.commit("setSno",l);var d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var f=s("VU/8")({name:"App",methods:{},created:function(){}},d,!1,function(t){s("WD+i")},null,null).exports,h=s("/ocq"),v=s("GgDs"),p=s("BO1k"),m=s.n(p),_=s("0RrJ");function g(t){return Object(_.a)({method:"GET",url:"/userInformation",params:t})}function C(t){return Object(_.a)({method:"GET",url:"/friendList",params:t})}function x(t){return Object(_.a)({method:"DELETE",url:"/information",params:t})}var y={name:"HomeTitle",data:function(){return{infoList:[],infoListStatus:!1,nowInfo:{}}},methods:{infoSubmit:function(t,e){var s,n=this;0==t.type?((s={id:t.id,status:e},Object(_.a)({method:"GET",url:"/friendRequest",params:s})).then(function(s){s.data.status?(n.removeInfo(t),n.$emit("updateFriendList"),e?alert("已接受"):alert("已拒绝")):alert("服务器正忙")}).catch(function(t){console.log(t)}),void 0!=t.pid&&x({type:"PairingRequest",id:t.pid}).then(function(t){t.status||alert("服务器正忙")}).catch(function(t){console.log(t)})):1==t.type&&x({type:"FriendRequest",id:t.id}).then(function(e){e.status?n.removeInfo(t):alert("服务器正忙")}).catch(function(t){console.log(t)})},removeInfo:function(t){for(var e=[],s=0;s<this.infoList.length;s++)this.infoList[s]!=t&&e.push(this.infoList[s]);this.infoList=e}},created:function(){var t,e=this;(t={sno:this.$store.state.user.sno},Object(_.a)({method:"GET",url:"/information",params:t})).then(function(t){var s=[],n=!0,i=!1,o=void 0;try{for(var a,r=m()(t.data.infoList);!(n=(a=r.next()).done);n=!0){var c=a.value;1==c.type?s.push({content:c.res+(3==c.status?"接受":"拒绝")+"了你的好友请求",type:1,acceptText:"我知道了",id:c.id}):2==c.type?s.push({content:c.req+"请求添加你为好友",type:0,acceptText:"同意",refuseText:"拒绝",id:c.id}):3==c.type&&s.push({content:c.res+"接受了你的配对请求并向你发送了好友请求",type:0,acceptText:"同意",refuseText:"拒绝",id:c.id,pid:c.pid})}}catch(t){i=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw o}}e.infoList=s}).catch(function(t){console.log(t)})}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"homeTitle"},[s("div",{staticClass:"logo"}),t._v(" "),s("div",{staticClass:"seizeASeat"}),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"information",on:{click:function(e){t.infoListStatus=!0}}},[0!=t.infoList.length?s("div",{staticClass:"infoExist"}):t._e()]),t._v(" "),t.infoListStatus?s("div",{staticClass:"baffles"}):t._e(),t._v(" "),t.infoListStatus?s("div",{staticClass:"informationBox"},[s("div",{staticClass:"title"},[t._v("消息列表")]),t._v(" "),0==t.infoList.length?s("div",{staticClass:"empty"},[t._v("暂无消息")]):s("ul",t._l(t.infoList,function(e){return s("li",[s("div",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),s("button",{staticClass:"accept",on:{click:function(s){return t.infoSubmit(e,!0)}}},[t._v(t._s(e.acceptText))]),t._v(" "),0==e.type?s("button",{staticClass:"refuse",on:{click:function(s){return t.infoSubmit(e,!1)}}},[t._v(t._s(e.refuseText))]):t._e()])}),0),t._v(" "),s("button",{on:{click:function(e){t.infoListStatus=!1}}},[t._v("返回")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search"},[e("input",{attrs:{type:"text"}}),this._v(" "),e("button",{staticClass:"submit"})])}]};var w=s("VU/8")(y,L,!1,function(t){s("5g6/")},null,null).exports,b={name:"HomeUserInfo",data:function(){return{user:{}}},props:["sno","type"],computed:{sexClass:function(){var t=["sex"];return"edit"==this.type&&t.push("edit"),"男"==this.user.sex?t.push("sexm"):"女"==this.user.sex&&t.push("sexf"),t}},methods:{changeSex:function(){"show"!=this.type&&("男"==this.user.sex?this.user.sex="女":"女"==this.user.sex?this.user.sex="?":this.user.sex="男")},commit:function(){this.$emit("submit",this.user)}},created:function(){var t=this;g({sno:this.sno,type:"complete"}).then(function(e){t.user=e.data,t.user.sno=t.sno}).catch(function(t){console.log(t)})}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"homeUserInfo"},[s("div",{staticClass:"baffles"}),t._v(" "),s("div",{staticClass:"userInfoMain"},[s("div",{staticClass:"username"},["show"==t.type?s("span",{staticClass:"content"},[t._v(t._s(t.user.username))]):s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"content",attrs:{type:"text"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),t._v(" "),s("div",{class:t.sexClass,on:{click:t.changeSex}}),t._v(" "),s("div",{staticClass:"other"},[s("div",{staticClass:"sno"},[t._v("\n        学号：\n        "),s("span",{staticClass:"content"},[t._v(t._s(t.user.sno))])]),t._v(" "),s("div",{staticClass:"age"},[t._v("\n        年龄：\n        "),"show"==t.type?s("span",{staticClass:"content"},[t._v(t._s(t.user.age))]):s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.age,expression:"user.age"}],staticClass:"content",attrs:{type:"text"},domProps:{value:t.user.age},on:{input:function(e){e.target.composing||t.$set(t.user,"age",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"height"},[t._v("\n        身高：\n        "),"show"==t.type?s("span",{staticClass:"content"},[t._v(t._s(t.user.height))]):s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.height,expression:"user.height"}],staticClass:"content",attrs:{type:"text"},domProps:{value:t.user.height},on:{input:function(e){e.target.composing||t.$set(t.user,"height",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"weight"},[t._v("\n        体重：\n        "),"show"==t.type?s("span",{staticClass:"content"},[t._v(t._s(t.user.weight))]):s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.weight,expression:"user.weight"}],staticClass:"content",attrs:{type:"text"},domProps:{value:t.user.weight},on:{input:function(e){e.target.composing||t.$set(t.user,"weight",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"personalProfile"},[s("div",{staticClass:"title"},[t._v("个人简介")]),t._v(" "),"show"==t.type?s("div",{staticClass:"content"},[t._v(t._s(t.user.personalProfile))]):s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user.personalProfile,expression:"user.personalProfile"}],staticClass:"content",domProps:{value:t.user.personalProfile},on:{input:function(e){e.target.composing||t.$set(t.user,"personalProfile",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"contactInformation"},[s("div",{staticClass:"title"},[t._v("联系方式")]),t._v(" "),"show"==t.type?s("div",{staticClass:"content"},[t._v(t._s(t.user.contactInformation))]):s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user.contactInformation,expression:"user.contactInformation"}],staticClass:"content",domProps:{value:t.user.contactInformation},on:{input:function(e){e.target.composing||t.$set(t.user,"contactInformation",e.target.value)}}})]),t._v(" "),s("button",{on:{click:t.commit}},[t._v("确定")])])])},staticRenderFns:[]};var k=s("VU/8")(b,T,!1,function(t){s("Pq03")},null,null).exports,S={components:{HomeUserInfo:k},name:"HomeUser",data:function(){return{username:null,sno:null,sex:null,userInfoStatus:!1}},computed:{sexClass:function(){var t=["sex"];return"男"==this.sex?t.push("sexm"):"女"==this.sex&&t.push("sexf"),t}},methods:{logout:function(){this.$router.push("/login")},submit:function(t){var e,s=this;this.userInfoStatus=!1,(e={sno:this.sno,username:t.username,sex:t.sex,age:t.age,height:t.height,weight:t.weight,personalProfile:t.personalProfile,contactInformation:t.contactInformation},Object(_.a)({method:"POST",url:"/userInformation",params:e})).then(function(e){e.data.status||alert("修改失败"),s.sex=t.sex,s.username=t.username}).catch(function(t){console.log(t)}),console.log(t)}},created:function(){var t=this;g({sno:this.$store.state.user.sno,type:"simple"}).then(function(e){var s=e.data;s.status?(t.sno=t.$store.state.user.sno,t.username=s.username,t.sex=s.sex):(alert("账号异常！"),t.$router.push("/login"))}).catch(function(t){console.log(t)})}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"homeUser"},[s("div",{staticClass:"userInformation"},[s("div",{staticClass:"username"},[t._v(t._s(t.username))]),t._v(" "),s("div",{staticClass:"sno"},[t._v("学号："+t._s(t.sno))]),t._v(" "),s("div",{class:t.sexClass}),t._v(" "),s("div",{staticClass:"edit",on:{click:function(e){t.userInfoStatus=!0}}})]),t._v(" "),t.userInfoStatus?s("home-user-info",{attrs:{sno:t.sno,type:"edit",submit:null},on:{submit:t.submit}}):t._e(),t._v(" "),s("div",{staticClass:"logout",on:{click:t.logout}},[t._v("切换账号")])],1)},staticRenderFns:[]};var $=s("VU/8")(S,I,!1,function(t){s("1Odv")},null,null).exports,E={name:"HomePairingList",data:function(){return{pairingList:[],addStatus:!1,addContent:""}},methods:{submit:function(){console.log(this.addContent)}},created:function(){for(var t="abcdefghijklmnopqretuvwxyz          ",e=0;e<100;e++){for(var s="asd";0!=tool.getIntRandom(0,200);)s+=t[tool.getIntRandom(0,t.length-1)];this.pairingList.push({content:s,bgc:tool.randomColor(180,220)})}}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pairingListBox"},[s("div",{staticClass:"pairingListBoxMain"},[s("ul",t._l(t.pairingList,function(e){return s("li",{style:{backgroundColor:e.bgc}},[t._m(0,!0),t._v(" "),s("div",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),s("div",{staticClass:"time"},[t._v("日期：2021/6/2")]),t._v(" "),s("div",{staticClass:"accept"},[t._v("我可以")])])}),0)]),t._v(" "),s("div",{staticClass:"addPairingRequest",on:{click:function(e){t.addStatus=!0}}},[t._v("+")]),t._v(" "),t.addStatus?s("div",{staticClass:"baffles"}):t._e(),t._v(" "),t.addStatus?s("div",{staticClass:"addPairingRequestBox"},[s("div",{staticClass:"title"},[t._v("发起配对")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addContent,expression:"addContent"}],domProps:{value:t.addContent},on:{input:function(e){e.target.composing||(t.addContent=e.target.value)}}}),t._v(" "),s("button",{staticClass:"submit",on:{click:t.submit}},[t._v("提交")]),t._v(" "),s("button",{staticClass:"close",on:{click:function(e){t.addStatus=!1}}},[t._v("取消")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"username"},[e("div",{staticClass:"usernameMain"},[this._v("ycx")])])}]};var F=s("VU/8")(E,U,!1,function(t){s("B5qy")},null,null).exports,R={name:"HomeTips",data:function(){return{content:"是否确定",acceptText:"是",refuseText:"否"}},props:["data"],methods:{acceptClick:function(){this.$emit("accept")},refuseClick:function(){this.$emit("refuse")}},mounted:function(){void 0!=this.data.content&&(this.content=this.data.content),void 0!=this.data.acceptText&&(this.acceptText=this.data.acceptText),void 0!=this.data.refuseText&&(this.refuseText=this.data.refuseText)}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"homeTips"},[s("div",{staticClass:"baffles"}),t._v(" "),s("div",{staticClass:"homeTipsMain"},[s("div",{staticClass:"content"},[t._v(t._s(t.content))]),t._v(" "),s("button",{staticClass:"accept",on:{click:t.acceptClick}},[t._v(t._s(t.acceptText))]),t._v(" "),s("button",{staticClass:"refuse",on:{click:t.refuseClick}},[t._v(t._s(t.refuseText))])])])},staticRenderFns:[]};var O={name:"HomeFriendList",data:function(){return{inputBox:null,friendList:[],showList:[],userInfoStatus:!1,tipsStatus:!1,sno:null,searchText:"",type:"default",tipsData:{},nowUser:{}}},methods:{showUserInfo:function(t){this.sno=t,this.userInfoStatus=!0},closeInfo:function(){this.userInfoStatus=!1},searchClick:function(){this.type="default",this.search()},search:function(){this.showList=[];for(var t=0;t<this.friendList.length;t++)-1!=this.friendList[t].username.indexOf(this.searchText)?this.showList.push(this.friendList[t]):this.friendList[t].sno==this.searchText&&this.showList.push(this.friendList[t])},listClick:function(t){"default"==this.type?this.showUserInfo(t.sno):"add"==this.type?(this.nowUser=t,this.tipsData.content="要添加"+t.username+"为好友吗",this.tipsData.acceptText="添加",this.tipsData.refuseText="取消",this.tipsStatus=!0):"remove"==this.type&&(this.nowUser=t,this.tipsData.content="要删除好友"+t.username+"吗",this.tipsData.acceptText="删除",this.tipsData.refuseText="取消",this.tipsStatus=!0)},addFriend:function(){var t,e=this;this.type="add",(t={message:this.searchText},Object(_.a)({method:"GET",url:"/userList",params:t})).then(function(t){e.showList=t.data.userList}).catch(function(t){console.log(t)})},removeFriend:function(){"remove"!=this.type?this.type="remove":this.type="default",this.search()},tipsAccept:function(){var t,e=this;"add"==this.type?(t={applicant:this.$store.state.user.sno,requested:this.nowUser.sno},Object(_.a)({method:"POST",url:"/friendRequest",params:t})).then(function(t){t.data.status?alert("已发送好友请求"):console.log("addFriend false")}).catch(function(t){console.log(t)}):"remove"==this.type&&function(t){return Object(_.a)({method:"DELETE",url:"/friendList",params:t})}({reqSno:this.$store.state.user.sno,resSno:this.nowUser.sno}).then(function(t){if(t.data.status){for(var s=[],n=0;n<e.friendList.length;n++)e.friendList[n]!=e.nowUser&&s.push(e.friendList[n]);e.friendList=s,e.search(),setTimeout(function(){alert("已删除该好友")},10)}else console.log("removeFriend false")}).catch(function(t){console.log(t)}),this.tipsStatus=!1},updateFriendListEvent:function(){var t=this;C({sno:this.$store.state.user.sno}).then(function(e){t.friendList=e.data.friendList,"add"!=t.type&&t.search()}).catch(function(t){console.log(t)})}},created:function(){var t=this;C({sno:this.$store.state.user.sno}).then(function(e){t.friendList=e.data.friendList,t.search()}).catch(function(t){console.log(t)})},mounted:function(){this.inputBox=this.$el.querySelector(".controller > .search > input")},components:{HomeUserInfo:k,HomeTips:s("VU/8")(R,P,!1,function(t){s("cEZk")},null,null).exports}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"frindListBox"},[s("div",{staticClass:"title"},[t._v("好友列表")]),t._v(" "),s("div",{staticClass:"controller"},[s("div",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text"},domProps:{value:t.searchText},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._v(" "),s("button",{on:{click:t.searchClick}})]),t._v(" "),s("div",{staticClass:"addFriend",on:{click:t.addFriend}}),t._v(" "),s("div",{staticClass:"removeFriend",on:{click:t.removeFriend}})]),t._v(" "),s("ul",t._l(t.showList,function(e){return s("li",{on:{click:function(s){return t.listClick(e)}}},[s("div",{staticClass:"username"},[t._v(t._s(e.username))]),t._v(" "),s("div",{staticClass:"sno"},[t._v("学号："+t._s(e.sno))])])}),0),t._v(" "),t.userInfoStatus?s("home-user-info",{attrs:{sno:t.sno,type:"show"},on:{submit:t.closeInfo}}):t._e(),t._v(" "),t.tipsStatus?s("home-tips",{attrs:{data:t.tipsData},on:{accept:t.tipsAccept,refuse:function(e){t.tipsStatus=!1}}}):t._e()],1)},staticRenderFns:[]};var H=s("VU/8")(O,D,!1,function(t){s("seRa")},null,null).exports,q={name:"Home",components:{Header:v.a,HomeTitle:w,HomeUser:$,HomePairingList:F,HomeFriendList:H},methods:{updateFriendList:function(){this.$refs.friendList.updateFriendListEvent()}}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("div",{staticClass:"titleBox updown"},[e("div",{staticClass:"left"},[e("home-title",{on:{updateFriendList:this.updateFriendList}})],1),this._v(" "),e("div",{staticClass:"right"},[e("home-user")],1)]),this._v(" "),e("div",{staticClass:"content updown"},[e("div",{staticClass:"left"},[e("home-pairing-list")],1),this._v(" "),e("div",{staticClass:"right"},[e("home-friend-list",{ref:"friendList"})],1)])])},staticRenderFns:[]};var j=s("VU/8")(q,N,!1,function(t){s("F8MX")},null,null).exports;n.a.use(h.a);var B=[{path:"/home",redirect:"/"},{path:"/",name:"Home",component:j},{path:"/login",name:"Login",component:function(){return s.e(2).then(s.bind(null,"ook+"))},children:[{path:"/login/",component:function(){return s.e(1).then(s.bind(null,"5oUq"))}},{path:"/login/register",component:function(){return s.e(0).then(s.bind(null,"DMJv"))}}]}],M=new h.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:B});M.beforeResolve(function(t,e,s){var n=u.state.user.sno;"/login"!=t.path&&"/login/register"!=t.path?null!=n?s():s("/login"):s()});var V=M;n.a.config.productionTip=!1,window.rm=new n.a({el:"#app",router:V,store:u,render:function(t){return t(f)}})},Pq03:function(t,e){},UvZu:function(t,e){},"WD+i":function(t,e){},cEZk:function(t,e){},seRa:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.289029091677d5ae6196.js.map